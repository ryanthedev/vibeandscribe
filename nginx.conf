# The Study - nginx configuration
# Only accessible via SSH tunnel (localhost only)
#
# Usage:
#   1. Copy this to /etc/nginx/sites-available/blog
#   2. Link: sudo ln -s /etc/nginx/sites-available/blog /etc/nginx/sites-enabled/
#   3. Test: sudo nginx -t
#   4. Reload: sudo systemctl reload nginx
#
# Access via SSH tunnel:
#   ssh -L 8080:localhost:8888 your-server
#   Then open http://localhost:8080

server {
    # ONLY listen on localhost - not accessible from internet
    listen 127.0.0.1:8888;

    server_name localhost;

    # Path to your blog
    root /home/r/repos/blog;
    index index.html;

    # Serve static files
    location / {
        try_files $uri $uri/ =404;
    }

    # Cache static assets
    location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2)$ {
        expires 7d;
        add_header Cache-Control "public, immutable";
    }

    # Security headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;

    # Logging (optional - comment out if not needed)
    access_log /var/log/nginx/blog_access.log;
    error_log /var/log/nginx/blog_error.log;
}
